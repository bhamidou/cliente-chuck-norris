(()=>{"use strict";async function e(e){const t=await fetch(e);return await t.json()}function t(e){document.getElementById("jokes").innerHTML=e}function n(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}function o(e){document.getElementById("h2-cat").textContent=e}function a(e){let t=localStorage.getItem(e);return JSON.parse(t)}let l="https://api.chucknorris.io/jokes/random?category=";function c(e){let t=document.getElementById("jokes");(async function(e,t){const n=await fetch("https://translate.badrweb.es/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:t,format:"text",api_key:"3cf2a2c6-e2bc-4f57-94cb-1ce6b131e981"}),headers:{"Content-Type":"application/json"}});return await n.json()})(t.innerText,e).then((e=>{t.textContent=e.translatedText}))}!function(){if(null!=a("category")){let e=a("category");"random"==e.type?(l="https://api.chucknorris.io/jokes/random",o("Random")):null==e.type?(o(document.getElementById("h2-cat").textContent+" "+e.name),l+=e.name):(o(e.type+': "'+e.name+'"'),l="https://api.chucknorris.io/jokes/search?query="+e.name)}else o("Don't have choose option for joke, you will redirect in 6s to index"),setTimeout((()=>{window.location.href="index.html"}),6e3);null==a("lang")&&function(e){let t=JSON.stringify("en");localStorage.setItem("lang",t)}()}(),e(l).then((e=>{if(e.total){let a=n(0,e.total);t(e.result[a].value),e.result[a].categories>=1&&o(e.result[a].categories[0])}else t(e.value);c(a("lang"))})),document.addEventListener("keydown",(function(r){"r"==r.key&&e(l).then((e=>{if(e.total){let l=n(0,e.total);t(e.result[l].value);let c=a("category");e.result[l].categories.length>=1?o(c.type+': "'+c.name+'" category: '+e.result[l].categories[0]):o(c.type+': "'+c.name+'"')}else t(e.value);c(a("lang"))})).catch((e=>{console.log(e)}))})),e("https://translate.badrweb.es/languages").then((e=>{e.forEach((e=>{let t=document.getElementById("list_lang"),n=document.createElement("option");n.text=e.name,n.id=e.code;let o=localStorage.getItem("lang"),a=JSON.parse(o);null==a&&(a="en"),e.code==a&&(n.selected="selected"),t.options.add(n)}))})).catch((e=>{console.log(e)})),document.getElementById("list_lang").addEventListener("change",(function(e){let t=e.currentTarget.selectedOptions[0].id;var n=JSON.stringify(t);localStorage.setItem("lang",n),c(t)}))})();